{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/AfriDamAi-App-2025/AfriDamAi-App-2025/providers/theme-provider.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { createContext, useContext, useEffect, useState } from \"react\"\n\ntype Theme = \"light\" | \"dark\"\n\ninterface ThemeContextType {\n  theme: Theme\n  toggleTheme: () => void\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined)\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  const [theme, setTheme] = useState<Theme>(\"light\")\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    const savedTheme = localStorage.getItem(\"theme\") as Theme | null\n    const prefersDark = window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n    const initialTheme = savedTheme || (prefersDark ? \"dark\" : \"light\")\n\n    setTheme(initialTheme)\n    document.documentElement.classList.toggle(\"dark\", initialTheme === \"dark\")\n    setMounted(true)\n  }, [theme])\n\n  const toggleTheme = () => {\n    setTheme((prev) => {\n      const newTheme = prev === \"light\" ? \"dark\" : \"light\"\n      localStorage.setItem(\"theme\", newTheme)\n      document.documentElement.classList.toggle(\"dark\", newTheme === \"dark\")\n      return newTheme\n    })\n  }\n\n  // if (!mounted) {\n  //   return <ThemeContext.Provider value={{ theme: \"light\", toggleTheme }}>{children}</ThemeContext.Provider>\n  // }\n\n  return <ThemeContext.Provider value={{ theme, toggleTheme }}>{children}</ThemeContext.Provider>\n}\n\nexport function useTheme() {\n  const context = useContext(ThemeContext)\n  if (!context) {\n    throw new Error(\"useTheme must be used within ThemeProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAGA;AAHA;;;AAYA,MAAM,6BAAe,IAAA,sNAAa,EAA+B;AAE1D,SAAS,cAAc,EAAE,QAAQ,EAAiC;IACvE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAQ;IAC1C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,MAAM,cAAc,OAAO,UAAU,CAAC,gCAAgC,OAAO;QAC7E,MAAM,eAAe,cAAc,CAAC,cAAc,SAAS,OAAO;QAElE,SAAS;QACT,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,iBAAiB;QACnE,WAAW;IACb,GAAG;QAAC;KAAM;IAEV,MAAM,cAAc;QAClB,SAAS,CAAC;YACR,MAAM,WAAW,SAAS,UAAU,SAAS;YAC7C,aAAa,OAAO,CAAC,SAAS;YAC9B,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,aAAa;YAC/D,OAAO;QACT;IACF;IAEA,kBAAkB;IAClB,6GAA6G;IAC7G,IAAI;IAEJ,qBAAO,8OAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;YAAO;QAAY;kBAAI;;;;;;AAChE;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/AfriDamAi-App-2025/AfriDamAi-App-2025/lib/environment.ts"],"sourcesContent":["export const environment = {\n    apiUrl: process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3000/api\",\n    backendUrl: process.env.NEXT_PUBLIC_BACKEND_URL || \"http://localhost:3001\",\n    production: process.env.NODE_ENV === \"production\",\n  };\n"],"names":[],"mappings":";;;;AAAO,MAAM,cAAc;IACvB,QAAQ,QAAQ,GAAG,CAAC,mBAAmB,IAAI;IAC3C,YAAY,QAAQ,GAAG,CAAC,uBAAuB,IAAI;IACnD,YAAY,oDAAyB;AACvC"}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/AfriDamAi-App-2025/AfriDamAi-App-2025/lib/api-client.ts"],"sourcesContent":["import axios from \"axios\";\nimport { environment } from \"./environment\";\nimport { UserLoginDto, CreateUserDto, AuthResponse } from \"./types\"; // Assuming types are defined in ./types\n\nconst apiClient = axios.create({\n  baseURL: environment.backendUrl,\n});\n\nexport const setAuthToken = (token: string | null) => {\n  if (token) {\n    apiClient.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n  } else {\n    delete apiClient.defaults.headers.common[\"Authorization\"];\n  }\n};\n\nexport const login = async (credentials: UserLoginDto): Promise<AuthResponse> => {\n  const response = await apiClient.post(\"/api/auth/user/login\", credentials);\n  return response.data;\n};\n\nexport const register = async (userData: CreateUserDto) => {\n  const response = await apiClient.post(\"/api/auth/user/register\", userData);\n  return response.data;\n};\n\nexport const getProfile = async () => {\n  const response = await apiClient.get(\"/api/profile\");\n  return response.data;\n};\n\nexport const getUser = async (id: string) => {\n  const response = await apiClient.get(`/api/users/${id}`);\n  return response.data;\n};\n\nexport const updateProfile = async (updates: Partial<any>) => {\n  const response = await apiClient.patch(\"/api/profile\", updates);\n  return response.data;\n};\n\nexport const updateUser = async (id: string, updates: Partial<any>) => {\n  const response = await apiClient.patch(`/api/users/${id}`, updates);\n  return response.data;\n};\n\n// Existing functions\nexport async function uploadImage(file: File): Promise<{ imageId: string; fileName: string }> {\n    const formData = new FormData()\n    formData.append(\"file\", file)\n  \n    const response = await fetch(\"/api/upload\", {\n      method: \"POST\",\n      body: formData,\n    })\n  \n    if (!response.ok) {\n      throw new Error(\"Upload failed\")\n    }\n  \n    return response.json()\n  }\n  \n  export async function analyzeSkinImage(imageId: string, imageData?: string): Promise<any> {\n    const response = await fetch(\"/api/analyze-skin\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ imageId, imageData }),\n    })\n  \n    if (!response.ok) {\n      throw new Error(\"Analysis failed\")\n    }\n  \n    return response.json()\n  }\n  \n  export async function analyzeIngredients(ingredients: string): Promise<any> {\n    const response = await fetch(\"/api/analyze-ingredients\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ ingredients }),\n    })\n  \n    if (!response.ok) {\n      throw new Error(\"Analysis failed\")\n    }\n  \n    return response.json()\n  }\n  \n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAGA,MAAM,YAAY,gJAAK,CAAC,MAAM,CAAC;IAC7B,SAAS,6JAAW,CAAC,UAAU;AACjC;AAEO,MAAM,eAAe,CAAC;IAC3B,IAAI,OAAO;QACT,UAAU,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;IACxE,OAAO;QACL,OAAO,UAAU,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;IAC3D;AACF;AAEO,MAAM,QAAQ,OAAO;IAC1B,MAAM,WAAW,MAAM,UAAU,IAAI,CAAC,wBAAwB;IAC9D,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,WAAW,OAAO;IAC7B,MAAM,WAAW,MAAM,UAAU,IAAI,CAAC,2BAA2B;IACjE,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,aAAa;IACxB,MAAM,WAAW,MAAM,UAAU,GAAG,CAAC;IACrC,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,UAAU,OAAO;IAC5B,MAAM,WAAW,MAAM,UAAU,GAAG,CAAC,CAAC,WAAW,EAAE,IAAI;IACvD,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,gBAAgB,OAAO;IAClC,MAAM,WAAW,MAAM,UAAU,KAAK,CAAC,gBAAgB;IACvD,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,aAAa,OAAO,IAAY;IAC3C,MAAM,WAAW,MAAM,UAAU,KAAK,CAAC,CAAC,WAAW,EAAE,IAAI,EAAE;IAC3D,OAAO,SAAS,IAAI;AACtB;AAGO,eAAe,YAAY,IAAU;IACxC,MAAM,WAAW,IAAI;IACrB,SAAS,MAAM,CAAC,QAAQ;IAExB,MAAM,WAAW,MAAM,MAAM,eAAe;QAC1C,QAAQ;QACR,MAAM;IACR;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,iBAAiB,OAAe,EAAE,SAAkB;IACxE,MAAM,WAAW,MAAM,MAAM,qBAAqB;QAChD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;YAAE;YAAS;QAAU;IAC5C;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,mBAAmB,WAAmB;IAC1D,MAAM,WAAW,MAAM,MAAM,4BAA4B;QACvD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;YAAE;QAAY;IACrC;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/AfriDamAi-App-2025/AfriDamAi-App-2025/providers/auth-provider.tsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useState, useEffect, type ReactNode } from \"react\"\nimport { jwtDecode } from \"jwt-decode\";\nimport { login, register, getProfile, setAuthToken, updateProfile as apiUpdateProfile, getUser, updateUser } from \"../lib/api-client\"\nimport { UserLoginDto, CreateUserDto } from \"../lib/types\"\n\ninterface User {\n  id: string;\n  email: string;\n  firstName: string;\n  lastName: string;\n  sex: string;\n  phoneNo: string;\n  profile: {\n    id: string;\n    userId: string;\n    ageRange: number;\n    skinType: string;\n    knownSkinAllergies: string[];\n    previousTreatments: string[];\n    createdAt: string;\n    updatedAt: string;\n  };\n  isActive: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\ninterface AuthContextType {\n  user: User | null\n  isSignedIn: boolean\n  signIn: (credentials: UserLoginDto) => Promise<void>\n  signUp: (userData: CreateUserDto) => Promise<void>\n  signOut: () => void\n  updateUserProfile: (updates: Partial<User>) => void\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      setAuthToken(token);\n      try {\n        const decoded: any = jwtDecode(token);\n        const userId = decoded.sub || decoded.id;\n        if (userId) {\n          getUser(userId).then((response: any) => {\n            const userData = response.resultData || response;\n            setUser(userData);\n          }).catch((err: any) => {\n            console.error(\"User fetch error:\", err);\n            signOut();\n          });\n        }\n      } catch (err) {\n        console.error(\"Token decode error:\", err);\n        signOut();\n      }\n    }\n  }, []);\n\n  const signIn = async (credentials: UserLoginDto) => {\n    try {\n      const data = await login(credentials);\n      const { accessToken } = data;\n      localStorage.setItem(\"token\", accessToken);\n      setAuthToken(accessToken);\n\n      const decoded: any = jwtDecode(accessToken);\n      const userId = decoded.sub || decoded.id;\n      const response = await getUser(userId);\n      setUser(response.resultData || response);\n    } catch (error: any) {\n      console.error(\"Sign in error:\", error);\n      throw error;\n    }\n  }\n\n  const signUp = async (userData: CreateUserDto) => {\n    try {\n      await register(userData);\n      // Automatically sign in the user directly after registration\n      await signIn({ email: userData.email, password: userData.password });\n    } catch (error: any) {\n      console.error(\"Sign up error:\", error);\n      throw error;\n    }\n  }\n\n  const signOut = () => {\n    setUser(null)\n    localStorage.removeItem(\"token\");\n    setAuthToken(null);\n  }\n\n  const updateUserProfile = async (updates: Partial<User>) => {\n    if (user && user.id) {\n      const response = await updateUser(user.id, updates);\n      setUser(response.resultData || response);\n    }\n  }\n\n  return (\n    <AuthContext.Provider value={{ user, isSignedIn: !!user, signIn, signUp, signOut, updateUserProfile }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within AuthProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AAJA;;;;;AAsCA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAE9C,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO;YACT,IAAA,gKAAY,EAAC;YACb,IAAI;gBACF,MAAM,UAAe,IAAA,mKAAS,EAAC;gBAC/B,MAAM,SAAS,QAAQ,GAAG,IAAI,QAAQ,EAAE;gBACxC,IAAI,QAAQ;oBACV,IAAA,2JAAO,EAAC,QAAQ,IAAI,CAAC,CAAC;wBACpB,MAAM,WAAW,SAAS,UAAU,IAAI;wBACxC,QAAQ;oBACV,GAAG,KAAK,CAAC,CAAC;wBACR,QAAQ,KAAK,CAAC,qBAAqB;wBACnC;oBACF;gBACF;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,uBAAuB;gBACrC;YACF;QACF;IACF,GAAG,EAAE;IAEL,MAAM,SAAS,OAAO;QACpB,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,yJAAK,EAAC;YACzB,MAAM,EAAE,WAAW,EAAE,GAAG;YACxB,aAAa,OAAO,CAAC,SAAS;YAC9B,IAAA,gKAAY,EAAC;YAEb,MAAM,UAAe,IAAA,mKAAS,EAAC;YAC/B,MAAM,SAAS,QAAQ,GAAG,IAAI,QAAQ,EAAE;YACxC,MAAM,WAAW,MAAM,IAAA,2JAAO,EAAC;YAC/B,QAAQ,SAAS,UAAU,IAAI;QACjC,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,kBAAkB;YAChC,MAAM;QACR;IACF;IAEA,MAAM,SAAS,OAAO;QACpB,IAAI;YACF,MAAM,IAAA,4JAAQ,EAAC;YACf,6DAA6D;YAC7D,MAAM,OAAO;gBAAE,OAAO,SAAS,KAAK;gBAAE,UAAU,SAAS,QAAQ;YAAC;QACpE,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,kBAAkB;YAChC,MAAM;QACR;IACF;IAEA,MAAM,UAAU;QACd,QAAQ;QACR,aAAa,UAAU,CAAC;QACxB,IAAA,gKAAY,EAAC;IACf;IAEA,MAAM,oBAAoB,OAAO;QAC/B,IAAI,QAAQ,KAAK,EAAE,EAAE;YACnB,MAAM,WAAW,MAAM,IAAA,8JAAU,EAAC,KAAK,EAAE,EAAE;YAC3C,QAAQ,SAAS,UAAU,IAAI;QACjC;IACF;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM,YAAY,CAAC,CAAC;YAAM;YAAQ;YAAQ;YAAS;QAAkB;kBACjG;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}}]
}